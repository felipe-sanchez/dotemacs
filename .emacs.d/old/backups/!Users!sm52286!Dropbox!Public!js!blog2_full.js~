$(document).ready(function() {

	/* This is basic - uses default settings */
	
	$(".mobile-photo a").fancybox({
hideOnContentClick: true,
transitionIn	:	"elastic",
transitionOut	:	"elastic"
});
	$(".separator a").fancybox({
hideOnContentClick: true,
transitionIn	:	'elastic',
transitionOut	:	'elastic'
});	

$(".post-body").append("<br><center><button onClick=\"location.href='mailto:vallestelle@gmail.com'\">&#9829; Scrivi a vallestelle@gmail.com</button></center>");


//	if (navigator.appVersion.indexOf("MSIE") == -1)
		SNOW_Weather();
});


////////////////////////////////////////////////////////////////
// Javascript made by Rasmus - http://www.peters1.dk //
////////////////////////////////////////////////////////////////

var SNOW_Picture = "http://dl.dropbox.com/u/5265022/js/stella.png";
var SNOW_Picture_2 = "http://dl.dropbox.com/u/5265022/js/stella.png";
var SNOW_Picture_3 = "http://dl.dropbox.com/u/5265022/js/stella.png";
var SNOW_no;

if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
	SNOW_no = 4;
} else
	SNOW_no = 5;

var SNOW_Time;
var SNOW_dx, SNOW_xp, SNOW_yp;
var SNOW_am, SNOW_stx, SNOW_sty, wind; 
var i, SNOW_Browser_Width, SNOW_Browser_Height;
var SNOW_LEFT;

SNOW_Browser_Width = 700;
SNOW_Browser_Height = 300;
SNOW_LEFT = 0.5*(self.innerWidth - 700);


SNOW_dx = new Array();
SNOW_xp = new Array();
SNOW_yp = new Array();
SNOW_am = new Array();
SNOW_stx = new Array();
SNOW_sty = new Array();
wind = new Array();

for (i = 0; i < SNOW_no; ++ i) 
{ 
	SNOW_dx[i] = 0; 
	SNOW_xp[i] = Math.random()*(SNOW_Browser_Width-50) + SNOW_LEFT;
	SNOW_yp[i] = Math.random()*SNOW_Browser_Height;
	SNOW_am[i] = Math.random()*50; 
	SNOW_stx[i] = 0.02 + Math.random()/10;
	SNOW_sty[i] = 2. + Math.random();
	if (i == 0) document.write("<div id=\"SNOW_flake"+ i +"\" style=\"position: absolute; z-index: 20; visibility: visible; top: 15px; left: 15px; display:none;\"><img src=\""+SNOW_Picture_2+"\" border=\"0\"></div>");
	else if (i == 1) document.write("<div id=\"SNOW_flake"+ i +"\" style=\"position: absolute; z-index: 20; visibility: visible; top: 15px; left: 15px; display:none;\"><img src=\""+SNOW_Picture_2+"\" border=\"0\"></div>");
	else if (i == 2) document.write("<div id=\"SNOW_flake"+ i +"\" style=\"position: absolute; z-index: 20; visibility: visible; top: 15px; left: 15px; display:none;\"><img src=\""+SNOW_Picture_3+"\" border=\"0\"></div>");
	else document.write("<div id=\"SNOW_flake"+ i +"\" style=\"position: absolute; z-index: 20; visibility: visible; top: 15px; left: 15px; display:none;\"><img src=\""+SNOW_Picture+"\" border=\"0\"></div>");
}

var windy = false;

function SNOW_Weather() 
{ 
	
	SNOW_Browser_Width = 700;
	SNOW_Browser_Height = 300;
	SNOW_LEFT = 0.5*(self.innerWidth - 700);

for (i = 0; i < SNOW_no; ++ i) 
{ 
	var img = document.getElementById("SNOW_flake"+i);
	SNOW_yp[i] += SNOW_sty[i];

	if (SNOW_yp[i] > SNOW_Browser_Height || SNOW_xp[i] > SNOW_LEFT + SNOW_Browser_Width) 
	{
		SNOW_xp[i] = Math.random()*(SNOW_Browser_Width-SNOW_am[i]-30) + SNOW_LEFT;
		SNOW_yp[i] = 5;
		wind[i] = 0.;
		SNOW_stx[i] = 0.02 + Math.random()/10;
		SNOW_sty[i] = 1. + 2.*Math.random();
		img.style.opacity = 1;
	}

	if (SNOW_yp[i] > SNOW_Browser_Height - 80) {
		img.style.opacity = (SNOW_Browser_Height-SNOW_yp[i])/80.;
	}

	SNOW_dx[i] += SNOW_stx[i];
	if (windy) {
		SNOW_xp[i] += 2.;
	}

	img.style.top=SNOW_yp[i]+"px";
	img.style.display="block";	
	img.style.left=SNOW_xp[i] + SNOW_am[i]*Math.sin(SNOW_dx[i]) +"px";
	img.style['-moz-transform'] = 'rotate(' + Number(360.*(SNOW_yp[i] / (SNOW_Browser_Height-50))) + "deg)";
	img.style['-webkit-transform'] = 'rotate(' + Number(360.*(SNOW_yp[i] / (SNOW_Browser_Height-50))) + "deg)";
	img.style['-ms-transform'] = 'rotate(' + Number(360.*(SNOW_yp[i] / (SNOW_Browser_Height-50))) + "deg)";	
	img.style['transform'] = 'rotate(' + Number(360.*(SNOW_yp[i] / (SNOW_Browser_Height-50))) + "deg)";	
}

SNOW_Time = setTimeout("SNOW_Weather()", 50);

}


